# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å…¥é–€<br>Vue.jsç·¨
2017å¹´3æœˆ15æ—¥

ã‚ªãƒˆãƒŠã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å‹‰å¼·ä¼š<br>
å”åŠ› **æœªæ¥ä¼šè­°å®¤**

---

# è‡ªå·±ç´¹ä»‹

- æ‘ä¸Šã€€å“
- 29æ­³
- ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹
- AngularJS(1ç³»)/Ruby On Rails

ãƒ¢ãƒ€ãƒ³ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ã“ã‚Œã‹ã‚‰å‹‰å¼·

---

# ã“ã®å‹‰å¼·ä¼šã«ã¤ã„ã¦

ã‚ªãƒˆãƒŠã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å‹‰å¼·ä¼š<br>
[http://otona.pro](http://otona.pro)

- 2016å¹´8æœˆã‹ã‚‰é–‹å§‹
- æœˆ2å›ï¼ˆç¬¬1æ°´æ›œã€ç¬¬3æ°´æ›œï¼‰
- ã‚¸ãƒ£ãƒ³ãƒ«ï¼ˆï¼Ÿï¼‰
    - ãƒ—ãƒ­ã‚°ãƒ©ãƒ è¨€èªã€æ©Ÿæ¢°å­¦ç¿’ã€Webç³»...

---

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ã¯

---

# Vue.js
The Progressive JavaScript Framework 

- Approachable (è¦ªã—ã¿ã‚„ã™ã„)
- Versatile (èé€šãŒåŠ¹ã)
- Performant (é«˜æ€§èƒ½)

---

# Vue.jsã®ç‰¹å¾´

- ãƒ“ãƒ¥ãƒ¼ã«ç‰¹åŒ–
- è»½é‡
- Virtual DOM (ä»®æƒ³DOM)
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
- æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

---

# ã–ã£ãã‚Šãƒ–ãƒ©ã‚¦ã‚¶<br>å‘¨ã‚Šã®ãŠè©±

---

# DOMã¨ã¯

- Document Object Model
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ„ãƒªãƒ¼ã‚’æ“ä½œã™ã‚‹API
- DOMã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§HTMLã‚’è‡ªç”±ã«æ“ä½œã§ãã‚‹
- ãƒ–ãƒ©ã‚¦ã‚¶ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ„ãƒªãƒ¼ã‚’ä½œæˆå¾Œè¡¨ç¤ºå‡¦ç†ã‚’è¡Œã†

---

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ„ãƒªãƒ¼

---

<!-- .slide: data-background="image/20170315/dom-tree.png" -->

---

# ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°<br>ã®æµã‚Œ

---

<!-- .slide: data-background="image/20170315/rendering-on-browser.png" -->

---

# æˆ»ã‚Šã¾ã™

---

# Virtual DOM<br>(ä»®æƒ³DOM)

Version 2(2016å¹´10æœˆãƒªãƒªãƒ¼ã‚¹)ã‹ã‚‰ä»®æƒ³DOMã‚’æ¡ç”¨

- ä»®æƒ³çš„ãªDOMã‚’ä½œæˆ
- DOMã®å¤‰æ›´ã‚’å·®åˆ†ã§è¡Œã†
- ä»®æƒ³DOMã«ã¤ã„ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå¿…è¦ã¯ãªã„

---

<!-- .slide: data-background="image/20170315/virtual-dom.png" -->

---

# Vue.jsã‚’ä½¿ãŠã†

---

# Vue.jsã®åˆã‚æ–¹

- CDNã‚’èª­ã¿è¾¼ã‚€
- vue-cliã‚’ä½¿ã†
- ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆ©ç”¨ã—ã¦è‡ªåˆ†ã§ä½œã‚‹

---

# JSFiddle

ãƒ–ãƒ©ã‚¦ã‚¶ã§ç›´æ¥HTML/CSS/JSã‚’å®Ÿè¡Œãƒ»ç¢ºèªã§ãã‚‹<br>
(goo.glã¯ã‚·ãƒ§ãƒ¼ãƒˆURL)

[https://jsfiddle.net/sugumura/e54kpf5h/](https://jsfiddle.net/sugumura/e54kpf5h/)
[https://goo.gl/cSL3oF](https://goo.gl/cSL3oF)

---

<!-- .slide: data-background="image/20170315/jsfiddle.png" -->

---

# Hello (html)

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ›¸ãæ–¹ {{}} ã§ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã‚’å›²ã‚€

```
<div id="app">
  {{ message }}
</div>
```

---

# Hello (js)

Vueã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆ

```
new Vue({
  el: '#app',
  data: {
    message: 'Hello Vue!'
  }
});
```

---

# å®Ÿè¡Œ

Hello Vue!ãŒè¡¨ç¤ºã•ã‚Œã‚‹

- elã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«DOMã‚’æŒ‡å®š
- dataã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

---

# ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ– (html)

dataã§æŒ‡å®šã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯VueãŒãƒ—ãƒ­ã‚­ã‚·ã™ã‚‹

```
var app = new Vue({
  el: '#app',
  data: {
    message: 'Hello Vue!',
    count: 0
  }
})

// 1ç§’æ¯ã«ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—
setInterval(function () {
    app.count = app.count + 1;
}, 1000)
```

---

# ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ– (js)

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦è¡¨ç¤ºã‚’æ›´æ–°

```
<div id="app">
  {{ message + count }}
</div>
```

---

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–

- v-ã‹ã‚‰å§‹ã¾ã‚‹ç‰¹åˆ¥ãªå±æ€§
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’ä½¿ã†ã“ã¨ã§æ§˜ã€…ãªæ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½

---

# v-bind

å±æ€§ã‚’åæ˜ ã™ã‚‹

```
<div id="app2">
  <a v-bind:href="url" target="_blank">Click me</a>
</div>
```

```
new Vue({
  el: '#app2',
  data: {
    url: 'https://www.google.com'
  }
})
```

Note: https://jp.vuejs.org/v2/api/#v-bind

---

# v-for (html)

é…åˆ—ã®ç¹°ã‚Šè¿”ã—ã‚’æ‰±ã†

```
<div id="app3">
  <ol>
    <li v-for="item in list">
      {{ item.label }}
    </li>
  </ol>
</div>
```

---

# v-for (js)

```
new Vue({
  el: '#app3',
  data: {
    list: [
      { label: 'Vue.js' },
      { label: 'Angular.js' },
      { label: 'React' }
    ]
  }
});
```

---

# v-model (html)

å…¥åŠ›ã‚’åæ˜ ã™ã‚‹

```
<div id="app4">
  <p>{{ message }}</p>
  <input v-model="message">
</div>
```

---

# v-model (js)

```
new Vue({
  el: '#app4',
  data: {
    message: 'Hello Vue!'
  }
})
```

---

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’<br>
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§çœºã‚ã‚ˆã†

[https://jp.vuejs.org/v2/api/#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–](https://jp.vuejs.org/v2/api/#%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%86%E3%82%A3%E3%83%96)

---

# å¤šã„ï¼Ÿå°‘ãªã„ï¼Ÿ

ä½œã£ã¦ã¿ã‚‹ã¨ä¾¿åˆ©ã•ã‚’å®Ÿæ„Ÿã§ãã¾ã™<br>
ã¡ã‚‡ã£ã¨ã—ãŸæ©Ÿèƒ½ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†

---

# Yes Or No?

ã‚ãªãŸãŒæ±ºæ–­ã™ã‚‹æ‰‹åŠ©ã‘ã‚’ã—ã¦ãã‚Œã¾ã™<br>
ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã¿ã¾ã—ã‚‡ã†

[https://yesno.wtf](https://yesno.wtf)

---

# ãƒã‚¤ãƒ³ãƒˆ

[https://yesno.wtf/api](https://yesno.wtf/api)

- APIãŒæä¾›ã•ã‚Œã¦ã„ã‚‹
- GETã™ã‚‹ã ã‘ã§JSONã‚’è¿”å´
- Cross-Origin Resource Sharing OK(é‡è¦)

---

# YesNoãƒªã‚¹ãƒˆã‚’ä½œã‚ã†

- è³ªå•ã‚’å…¥åŠ›ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¨­ç½®
- YesNo APIã§è¿”å´ã•ã‚ŒãŸç­”ãˆã®ãƒªã‚¹ãƒˆã‚’ä½œæˆ
- å›ç­”ã¯å‰Šé™¤å¯èƒ½
- å›ç­”ä»¶æ•°ã‚’è¡¨ç¤º

---

# ã²ãªå½¢ğŸ£

[https://jsfiddle.net/sugumura/6yo6x0L5/](https://jsfiddle.net/sugumura/6yo6x0L5/)
[https://goo.gl/2aDMWD](https://goo.gl/2aDMWD)

---

# ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚ã†

---

# Inputã‚’ç´ä»˜ã‘ã‚‹

```
<input type="text" v-model="question">
```

```
new Vue({
  el: '#app',
  data: {
  	question: ''
  }
});
```

---

# é€ä¿¡ãƒœã‚¿ãƒ³ã§ã‚¤ãƒ™ãƒ³ãƒˆ

```
<button v-on:click="add()">é€ä¿¡</button>
```

```
data: {
  question: ''
},
methods: {  // ãƒ¡ã‚½ãƒƒãƒ‰ã¯methodsã«è¨˜è¿°
  add: function () {
    console.log(this.question);
  }
}
```

---

# APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ

- axiosã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨
- Promiseå½¢å¼
- è©³ç´°èª¬æ˜ã¯çœç•¥ã•ã›ã¦ãã ã•ã„ğŸ™‡

---

# APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ

```
methods: {  // ãƒ¡ã‚½ãƒƒãƒ‰ã¯methodsã«è¨˜è¿°
  add: function () {      
    axios.get('https://yesno.wtf/api')
    .then(function (response) {
        console.log(response.data);
    });
  }
}
```

---

# APIãƒ‡ãƒ¼ã‚¿

```
{
  "answer": "no",   // ã¾ãŸã¯ "yes" 
  "forced": false,
  "image": "https://yesno.wtf/....gif"
}
```

---

# ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã‚ˆã†

---

# ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º(html)

src="{{item.image}}"ã¯ã‚¨ãƒ©ãƒ¼

```
<tr>
  <td>{{item.date}}</td><!-- æ—¥æ™‚ -->
  <td>{{item.question}}</td><!-- è³ªå• -->
  <td>{{item.answer}}</td><!-- å›ç­” -->
  <td><img v-bind:src="item.image" width="100" height="100"></td>
  <td><button>å‰Šé™¤</button></td>
</tr>
```

---

# ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º(js)

```
data: {
  item: {},
  question: ''
},
methods: {  // ãƒ¡ã‚½ãƒƒãƒ‰ã¯methodsã«è¨˜è¿°
  add: function () {
    var vm = this;  // thiså‚ç…§ç”¨
    axios.get('https://yesno.wtf/api')
    .then(function (response) {
        vm.item = response.data;
        vm.item.date = new Date();
        vm.item.question = vm.question;
    });
  }
}
```

Note: https://jsfiddle.net/sugumura/6yo6x0L5/7/

---

# ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½œã‚ã†

---

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

Vue.filterã§ä»»æ„ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½œæˆ<br>
Vueã‚’ç”Ÿæˆå‰(new)ã«è¿½åŠ 

```
// YYYY-mm-dd HH:mm:ss
Vue.filter('date-filter', function (val) {
  if (!val) return;
  return [val.getFullYear(),(val.getMonth()+1),val.getDate()]
    .join('-') + ' ' +
    [val.getHours(),val.getMinutes(),val.getSeconds()].join(':');
})
```

---

# Dateã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¡¨ç¤º

```
<tr>
  <td>{{item.date | date-filter}}</td><!-- æ—¥æ™‚ -->
  <td>{{item.question}}</td><!-- è³ªå• -->
  <td>{{item.answer}}</td><!-- å›ç­” -->
  ...
```

---

# ãƒªã‚¹ãƒˆã‚’è¡¨ç¤ºã—ã‚ˆã†

---

# ãƒªã‚¹ãƒˆè¡¨ç¤º(html)

```
<tr v-for="item in items">
  <td>{{item.date | date-filter}}</td><!-- æ—¥æ™‚ -->
  <td>{{item.question}}</td><!-- è³ªå• -->
  <td>{{item.answer}}</td><!-- å›ç­” -->
  ...
```

---

# ãƒªã‚¹ãƒˆè¡¨ç¤º1(js)

ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚’é…åˆ—ã«ã™ã‚‹

```
data: {
  items: [],    // itemã‹ã‚‰itemsã«å¤‰æ›´
  question: ''
},
```

---

# ãƒªã‚¹ãƒˆè¡¨ç¤º2(js)

```
add: function() {
  var vm = this; // thiså‚ç…§ç”¨
  axios.get('https://yesno.wtf/api')
    .then(function(response) {
      var item = {          // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
        date: new Date(),
        question: vm.question,
        answer: response.data.answer,
        image: response.data.image
      };
      vm.items.push(item);  // é…åˆ—ã«è¿½åŠ 
    });
}
```

Note: https://jsfiddle.net/sugumura/6yo6x0L5/8/

---

# å‰Šé™¤

---

# å‰Šé™¤(html)

v-forã‚’å¼•æ•°ä½¿ã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—ã™ã‚‹

```
<tr v-for="(item, index) in items">
  ...
  <td><button v-on:click="remove(index)">å‰Šé™¤</button></td>
</tr>
```

---

# å‰Šé™¤(js)

```
methods: {
  add: {
      ...
  },
  remove: function(index) {
    this.items.splice(index, 1);
  }
}
```

Note: https://jsfiddle.net/sugumura/6yo6x0L5/9/

---

# ä»¶æ•°ã‚’è¡¨ç¤ºã™ã‚‹

---

# ä»¶æ•°ã‚’è¡¨ç¤º(html)

```
<!-- åˆè¨ˆè¡Œ -->
<tr>
  <td colspan="5">åˆè¨ˆ: {{total}}ä»¶</td>
</tr>
```

---

# ä»¶æ•°ã‚’è¡¨ç¤º(js)

ä»¶æ•°ã¯é…åˆ—ã®é•·ã•<br>
ç®—å‡ºãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆ©ç”¨

```
methods: {
    ...
},
computed: {
    total: function () {
        return this.items.length;
    }
}
```

Note: https://jsfiddle.net/sugumura/6yo6x0L5/10/

---

# ç®—å‡ºãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

- ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ©ã‚¤ã‚¯ã«æ‰±ãˆã‚‹
- ()ã®å‘¼ã³å‡ºã—ä¸è¦
- ä¾å­˜é–¢ä¿‚ãŒæ›´æ–°ã•ã‚Œãªã‘ã‚Œã°ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹

---

# ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã“ã“ã¾ã§

æ™‚é–“ãŒã‚ã‚‹å ´åˆã€æ©Ÿèƒ½è¿½åŠ ã—ã¾ã™

---

# ã“ã‚Œã‹ã‚‰

æ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã¿ã¾ã—ã‚‡ã†

[https://jp.vuejs.org](https://jp.vuejs.org)

---

# è³‡æ–™

- [Vue.jså…¥é–€ â€•æœ€é€Ÿã§ä½œã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³](http://gihyo.jp/dev/serial/01/vuejs)
    - Webã‚¢ãƒ—ãƒªã‚’ä½œã‚‹å‰ã«

- [Vue.js 2.0 Server Side Rendering](https://speakerdeck.com/kazupon/vue-dot-js-2-dot-0-server-side-rendering)
    - ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å‚è€ƒã«ãªã‚Šã¾ã™

---

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦

- v2ã¯2016å¹´10æœˆ
- ãƒãƒƒãƒˆã§ã¯v1æƒ…å ±ãŒå¤šã„ã®ã§æ—¥ä»˜ã«æ³¨æ„
- æœ€æ–°ã¯è‹±èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèª

---

# ãŠã¤ã‹ã‚Œã•ã¾ã§ã—ãŸ
# ğŸµ

